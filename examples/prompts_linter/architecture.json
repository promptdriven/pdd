[
  {
    "reason": "Defines the core data structures for linting results, ensuring consistent output across CLI, API, and UI.",
    "description": "Pydantic models representing the canonical lint report structure. Includes `Finding` (rule_id, severity, message, evidence, suggested_edits) and `LintReport` (summary, findings, token_estimates).",
    "dependencies": [],
    "priority": 1,
    "filename": "models_findings_Python.prompt",
    "filepath": "src/backend/models/findings.py",
    "tags": [
      "backend",
      "core",
      "models"
    ],
    "interface": {
      "type": "module",
      "module": {}
    }
  },
  {
    "reason": "Provides a central registry to register and retrieve lint rules, enabling modular rule management.",
    "description": "A registry class or module that allows rules to be registered via decorators or explicit calls. It should support retrieving all rules or filtering by ID/tag. This decouples the engine from specific rule implementations.",
    "dependencies": [
      "models_findings_Python.prompt"
    ],
    "priority": 2,
    "filename": "rules_registry_Python.prompt",
    "filepath": "src/backend/rules/registry.py",
    "tags": [
      "backend",
      "core",
      "rules"
    ],
    "interface": {
      "type": "module",
      "module": {}
    }
  },
  {
    "reason": "Parses raw prompt text into a structured format amenable to analysis.",
    "description": "A parser module that reads a prompt file and breaks it down into sections (e.g., Requirements, Context), extracts tags (e.g., <include>, <shell>), and maintains a line map for reporting error locations.",
    "dependencies": [],
    "priority": 3,
    "filename": "parser_Python.prompt",
    "filepath": "src/backend/core/parser.py",
    "tags": [
      "backend",
      "core",
      "parser"
    ],
    "interface": {
      "type": "module",
      "module": {}
    }
  },
  {
    "reason": "Handles the resolution of <include> tags to estimate token usage and detect context dumps.",
    "description": "A utility module that resolves file paths referenced in <include> tags (respecting security roots), reads content, and provides simple token estimation (e.g., char count / 4). It must handle missing files gracefully.",
    "dependencies": [],
    "priority": 4,
    "filename": "include_resolver_Python.prompt",
    "filepath": "src/backend/core/include_resolver.py",
    "tags": [
      "backend",
      "core",
      "utils"
    ],
    "interface": {
      "type": "module",
      "module": {}
    }
  },
  {
    "reason": "Orchestrates the linting process by combining parsing, rule execution, and reporting.",
    "description": "The main engine class that takes raw text (and optional config), uses the Parser to structure it, iterates through registered rules from the Registry, and aggregates results into a LintReport object.",
    "dependencies": [
      "models_findings_Python.prompt",
      "rules_registry_Python.prompt",
      "parser_Python.prompt",
      "include_resolver_Python.prompt"
    ],
    "priority": 5,
    "filename": "lint_engine_Python.prompt",
    "filepath": "src/backend/core/lint_engine.py",
    "tags": [
      "backend",
      "core",
      "engine"
    ],
    "interface": {
      "type": "module",
      "module": {}
    }
  },
  {
    "reason": "Implements the specific PDD linting rules defined in the PRD.",
    "description": "A collection of rule implementations (PDD001-PDD060) covering Structure, Requirements, IO, Context, Determinism, and Attention. Each rule analyzes the parsed structure and emits Findings if violations are detected.",
    "dependencies": [
      "models_findings_Python.prompt",
      "rules_registry_Python.prompt",
      "parser_Python.prompt"
    ],
    "priority": 6,
    "filename": "pdd_rules_Python.prompt",
    "filepath": "src/backend/rules/pdd_rules.py",
    "tags": [
      "backend",
      "rules"
    ],
    "interface": {
      "type": "module",
      "module": {}
    }
  },
  {
    "reason": "Exposes the linting functionality via a REST API for the UI and external integrations.",
    "description": "A FastAPI application exposing a POST /lint endpoint. It accepts prompt text and options, invokes the Lint Engine, and returns the JSON report. It handles request validation and error responses.",
    "dependencies": [
      "lint_engine_Python.prompt",
      "models_findings_Python.prompt",
      "pdd_rules_Python.prompt"
    ],
    "priority": 7,
    "filename": "api_main_Python.prompt",
    "filepath": "src/backend/app/main.py",
    "tags": [
      "backend",
      "api",
      "fastapi"
    ],
    "interface": {
      "type": "api",
      "api": {}
    }
  },
  {
    "reason": "Provides a command-line interface for developers to lint files locally or in CI.",
    "description": "A Typer-based CLI tool. Commands include `lint <file>` (outputs text or JSON), `rules` (lists rules), and `explain <rule_id>`. It uses the Lint Engine directly (in-process) for performance and offline capability.",
    "dependencies": [
      "lint_engine_Python.prompt",
      "models_findings_Python.prompt",
      "pdd_rules_Python.prompt"
    ],
    "priority": 8,
    "filename": "cli_pddl_Python.prompt",
    "filepath": "src/cli/pddl.py",
    "tags": [
      "cli",
      "tool"
    ],
    "interface": {
      "type": "cli",
      "cli": {}
    }
  },
  {
    "reason": "Provides a user-friendly web interface for quick linting without CLI setup.",
    "description": "A Streamlit application. Features a text area for input, a 'Lint' button, and a display area for the structured report. It communicates with the backend API (or imports the engine directly if deployed as a monolith for simplicity, though PRD suggests API call).",
    "dependencies": [
      "models_findings_Python.prompt",
      "api_main_Python.prompt"
    ],
    "priority": 9,
    "filename": "ui_streamlit_Python.prompt",
    "filepath": "src/ui/streamlit_app.py",
    "tags": [
      "ui",
      "streamlit",
      "frontend"
    ],
    "interface": {
      "type": "page",
      "page": {
        "route": "/ (Streamlit default)",
        "params": [],
        "dataSources": [
          {
            "kind": "api",
            "source": "POST /lint",
            "method": "POST",
            "description": "Sends prompt text to backend for analysis",
            "inputs": [
              "prompt_text",
              "options"
            ],
            "outputs": [
              "LintReport JSON"
            ]
          }
        ],
        "layout": {}
      }
    }
  }
]
