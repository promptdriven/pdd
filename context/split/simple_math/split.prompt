Extract the input validation logic into a separate helper function. 