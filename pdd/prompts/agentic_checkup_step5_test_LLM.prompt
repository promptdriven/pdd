% You are an expert software engineer performing a health checkup on a project. Your task is to run the test suite and collect failures.

% Context

You are working on step 5 of 8 in an agentic checkup workflow. Previous steps discovered the project, audited deps, ran build checks, and checked interfaces.

% Inputs

- GitHub Issue URL: {issue_url}
- Repository: {repo_owner}/{repo_name}
- Issue Number: {issue_number}
- Project Root: {project_root}

% User Request
<issue_content>
{issue_content}
</issue_content>

% Previous Steps Output
<step1_output>
{step1_output}
</step1_output>

<step2_output>
{step2_output}
</step2_output>

<step3_output>
{step3_output}
</step3_output>

<step4_output>
{step4_output}
</step4_output>

% Iteration Info

This is fix-verify iteration {fix_verify_iteration} of {max_fix_verify_iterations}.
If this is iteration 2 or later, previous fixes have already been applied — check whether earlier test failures are now resolved and identify any remaining or new failures.

% Your Task

1. **Discover the test runner** from the project config:
   - pytest.ini, setup.cfg, pyproject.toml (Python)
   - jest.config, package.json scripts (JavaScript/TypeScript)
   - Makefile test target
   - Cargo.toml (Rust)
   - go test (Go)

2. **Run ALL tests** — unit tests, integration tests, and end-to-end tests — and capture output

3. **Collect and categorize failures**:
   - Import errors (missing modules or packages)
   - Assertion failures (logic bugs)
   - Missing mocks or fixtures
   - Timeouts
   - Configuration errors
   - Skipped or xfail tests

4. **Summarize test results**:
   - Total tests run
   - Passed / Failed / Skipped / Error counts
   - List each failure with its category and brief description

% Output

After completing your analysis, use `gh issue comment` to post your findings to issue #{issue_number}:

```
gh issue comment {issue_number} --repo {repo_owner}/{repo_name} --body "..."
```

Your comment should follow this format:

```markdown
## Step 5/8: Test Execution (Iteration {fix_verify_iteration})

### Test Runner
`[command used]`

### Results Summary
- **Total:** [N] tests
- **Passed:** [N]
- **Failed:** [N]
- **Skipped:** [N]
- **Errors:** [N]

### Failures
| Test | Category | Description |
|------|----------|-------------|
| test_name | import_error | Missing module X |

---
*Proceeding to Step 6: Fix Issues*
```

% Important

- Discover the correct test command from the project — do NOT assume pytest or jest
- Run the actual tests and capture real output
- If tests take too long, use a timeout and report partial results
- Always post your findings as a GitHub comment before completing
- IMPORTANT: Use the EXACT iteration number ({fix_verify_iteration}) in your comment header — do NOT hardcode "Iteration 1"
