<pdd-reason>Manages LLM providers: adding API keys with auto-loaded models, custom providers, and model removal.</pdd-reason>

<pdd-interface>
{
  "type": "module",
  "module": {
    "functions": [
      {"name": "add_api_key", "signature": "(scan_results: Dict[str, KeyInfo]) -> bool", "returns": "bool"},
      {"name": "add_custom_provider", "signature": "() -> bool", "returns": "bool"},
      {"name": "remove_models_by_provider", "signature": "() -> bool", "returns": "bool"},
      {"name": "remove_individual_models", "signature": "() -> bool", "returns": "bool"}
    ]
  }
}
</pdd-interface>

<pdd-dependency>api_key_scanner_python.prompt</pdd-dependency>

% You are an expert Python engineer. Your goal is to write the pdd/setup/provider_manager.py module.

% Role & Scope
Handles adding and removing LLM providers and models in PDD setup. Supports entering API keys for known providers (auto-loading all their models), adding custom LiteLLM-compatible providers, and two modes of model removal.

% Requirements

1. `add_api_key(scan_results)` — show missing keys from scan_results, prompt user for one, save to `~/.pdd/api-env.{shell}`, then copy ALL matching rows from master CSV (pdd/data/llm_model.csv) into user CSV (`~/.pdd/llm_model.csv`). No interactive model selection. If key already exists (replacing), update api-env only. If key name has no CSV rows, tell user to use "Add a custom provider" instead. Skip saving keys already in environment.
2. `add_custom_provider()` — prompt for provider prefix, model name, API key env var, base URL (optional), costs (optional). Append row to user CSV with sensible defaults. Save API key to api-env if provided.
3. `remove_models_by_provider()` — group user CSV models by api_key, show numbered list with counts, remove all rows for selected provider. Comment out (never delete) the key in api-env: `# Commented out by pdd setup on YYYY-MM-DD`.
4. `remove_individual_models()` — list all models from user CSV, let user select by comma-separated numbers, remove selected rows.
5. All CSV writes must be atomic (temp file + rename)
6. Detect shell from SHELL env var for api-env file path
7. Handle empty input as cancel/back

% Dependencies
<api_key_scanner_example>
  <include>context/api_key_scanner_example.py</include>
</api_key_scanner_example>

<llm_model_csv_schema>
The master CSV at pdd/data/llm_model.csv and user CSV at ~/.pdd/llm_model.csv share columns:
provider,model,input,output,coding_arena_elo,base_url,api_key,max_reasoning_tokens,structured_output,reasoning_type,location
</llm_model_csv_schema>

% Deliverables
- Module at `pdd/setup/provider_manager.py` exporting `add_api_key`, `add_custom_provider`, `remove_models_by_provider`, `remove_individual_models`.
