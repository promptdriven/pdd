# .pddrc - PDD Project Configuration
# This file defines contexts and settings for the PDD CLI codebase itself

version: "1.0"

contexts:
  # Regression test context (must come before pdd_cli to match first)
  regression:
    paths: ["*/staging/sync_regression_*", "**/staging/sync_regression_*", "*sync_regression_*", "sync_regression_*"]
    defaults:
      generate_output_path: "pdd/"
      test_output_path: "tests/"
      example_output_path: "examples/"
      default_language: "python"
      target_coverage: 10.0
      strength: 0.75
      temperature: 0.0
      budget: 10.0
      max_attempts: 3



  # Context-specific examples and utilities
  context:
    paths: ["context/**"]
    defaults:
      generate_output_path: "context/"
      test_output_path: "tests/context/"
      example_output_path: "context/"
      default_language: "python"
      target_coverage: 85.0
      strength: 0.75

  # Examples and demonstrations
  examples:
    paths: ["examples/**"]
    defaults:
      generate_output_path: "src/"
      test_output_path: "tests/"
      example_output_path: "examples/"
      default_language: "python"
      target_coverage: 80.0
      strength: 0.75

  # Utilities and tooling
  utils:
    paths: ["utils/**"]
    defaults:
      generate_output_path: "utils/"
      test_output_path: "tests/utils/"
      example_output_path: "utils/examples/"
      default_language: "python"
      target_coverage: 85.0
      strength: 0.75

  # Documentation and config
  docs:
    paths: ["docs/**", "*.md", "*.rst"]
    defaults:
      generate_output_path: "docs/"
      test_output_path: "tests/docs/"
      example_output_path: "docs/examples/"
      default_language: "markdown"
      target_coverage: 70.0
      strength: 0.75

  # Backend cloud functions (if applicable)
  backend:
    paths: ["backend/**", "functions/**", "api/**"]
    defaults:
      generate_output_path: "backend/src/"
      test_output_path: "backend/tests/"
      example_output_path: "backend/examples/"
      default_language: "python"
      target_coverage: 95.0
      strength: 0.75

  # Frontend web interface (if applicable)
  frontend:
    paths: ["frontend/**", "web/**", "ui/**"]
    defaults:
      generate_output_path: "frontend/src/"
      test_output_path: "frontend/__tests__/"
      example_output_path: "frontend/examples/"
      default_language: "typescript"
      target_coverage: 85.0
      strength: 0.75

  # Default fallback context for unmatched paths
  default:
    defaults:
      generate_output_path: "./"
      test_output_path: "tests/"
      example_output_path: "examples/"
      default_language: "python"
      target_coverage: 10.0
      strength: 0.75
      temperature: 0.0
      budget: 10.0
      max_attempts: 3


  # Commands context - prompts in prompts/commands/, output to pdd/commands/
  commands:
    paths: ["prompts/commands/**", "pdd/commands/**"]
    defaults:
      prompts_dir: "prompts/commands"
      generate_output_path: "pdd/commands/"
      test_output_path: "tests/commands/"
      example_output_path: "context/commands/"
      default_language: "python"
      target_coverage: 90.0
      strength: 1
      temperature: 0.0
      budget: 10.0
      max_attempts: 3

  # Server routes context - prompts in prompts/server/routes/, output to pdd/server/routes/
  server_routes:
    paths: ["prompts/server/routes/**", "pdd/server/routes/**"]
    defaults:
      prompts_dir: "prompts/server/routes"
      generate_output_path: "pdd/server/routes/"
      test_output_path: "tests/server/routes/"
      example_output_path: "context/server/routes/"
      default_language: "python"
      target_coverage: 90.0
      strength: 1
      temperature: 0.0
      budget: 10.0
      max_attempts: 3

  # Server context - prompts in prompts/server/, output to pdd/server/
  server:
    paths: ["prompts/server/**", "pdd/server/**"]
    defaults:
      prompts_dir: "prompts/server"
      generate_output_path: "pdd/server/"
      test_output_path: "tests/server/"
      example_output_path: "context/server/"
      default_language: "python"
      target_coverage: 90.0
      strength: 1
      temperature: 0.0
      budget: 10.0
      max_attempts: 3

  # Main PDD CLI codebase context
  pdd_cli:
    paths: ["pdd/**", "*.py", "prompts/**", "tests/**"]
    defaults:
      generate_output_path: "pdd"
      test_output_path: "tests"
      example_output_path: "context"
      default_language: "python"
      target_coverage: 80.0
      strength: 1
      temperature: 0.0
      budget: 10.0
      max_attempts: 3
