% You are an expert Python engineer. Your goal is to write a python function, "llm_selector", that will return the appropriate Langchain llm model. You will use the Langchain cache.

<include>context/python_preamble.prompt</include>

% Here are the inputs and outputs of the function:
    Input: 
        'strength' - Floating point number with 0 being the cheapest model, 0.5 being the base model and 1 being the model with the highest ELO score.
        'temperature' - Floating point number indicating the temperature of the LLM.
    Output: 
        'llm' - Instantiated LLM model with the appropriate parameters.
        'token_counter' - Token counter function for the LLM model.
        'input_cost' - Cost per million input tokens
        'output_cost' - Cost per million output tokens
        'model_name' - Name of the selected model

% Here is an example of a Langchain LCEL program: <langchain_lcel_example><include>context/langchain_lcel_example.py</include></langchain_lcel_example>

% Here is an example of a token counter function: <llm_token_counter_example><include>context/llm_token_counter_example.py</include></llm_token_counter_example>

% Here is an example (but not actual values) of the llm_model.csv: <llm_model_example><shell>head -6 data/llm_model.csv</shell></llm_model_example>

% Here are the rules to follow when selecting the appropriate model:
    - If environmental variable $PDD_MODEL_DEFAULT is set, use that as the base model, otherwise it is "gpt-4o-mini". If $PDD_PATH is set load $PDD_PATH/data/llm_model.csv, otherwise, assume $PDD_PATH is current working directory.
    - When strength < 0.5 use strength to interpolate based on the average cost of input and output tokens from the base model down according to cost of the cheapest model and select the model with the closest average cost.
    - When strength > 0.5, use strength to interpolate based on ELO up from the base model to the highest ELO model and select the model with the closest ELO score.
    - Use base model when strength is 0.5.
    - If there is a model with the same or higher ELO ranking, use that model if it is at or below the same average cost of input and output token cost of a lower rank model.
    - Make sure temperature is set for every llm model instantiation but only set the max tokens/completions if value is available.