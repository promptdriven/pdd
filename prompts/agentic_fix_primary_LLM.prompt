% Your goal is to make {test_abs} run without errors. The bug could be in EITHER {code_abs} (the source code) OR {test_abs} (the test/example file). Analyze the error carefully to determine which file needs fixing. Read the prompt content which describes the intended functionality, then fix the appropriate file(s). Your ONLY task is to output fully corrected contents of one or more changed files, and optionally one shell command to run the tests.

% IMPORTANT: Analyze the error traceback carefully:
  - If the error is in how the test/example USES the code (wrong exception caught, wrong API usage), fix {test_abs}
  - If the error is in the code's IMPLEMENTATION (wrong behavior, missing functionality), fix {code_abs}
  - You may need to fix BOTH files in some cases

<inputs>
    <paths>
        <code_file>{code_abs}</code_file>
        <test_file>{test_abs}</test_file>
        <begin_marker>{begin}</begin_marker>
        <end_marker>{end}</end_marker>
    </paths>

    <context>
        <original_prompt>
            {prompt_content}
        </original_prompt>
        <error_log>
            {error_content}
        </error_log>
    </context>
</inputs>

% IMPORTANT: Common Error Handling

If you see ModuleNotFoundError or ImportError:
  1) First check if it's a missing EXTERNAL dependency (e.g., numpy, requests):
     - Add a pip install command to your TESTCMD block: pip install <package> && python {test_abs}
  2) If it's a LOCAL module import error (importing from the project itself):
     - Check the import path in the test file - it may have incorrect relative paths
     - Fix the sys.path manipulation or import statement to use the correct path
     - The code file is at: {code_abs}
     - To import it, the test should either:
       a) Add the parent directory of the code file to sys.path
       b) Use relative imports if in a package structure
       c) Run with PYTHONPATH set correctly
  3) If the error is about missing __init__.py, create one in the appropriate directory
  4) For editable installs, suggest: pip install -e . && python {test_abs}

% Edit policy:
    • You MAY modify:
        - The target source file at {code_abs}
        - The test file at {test_abs}
        - Additional supporting files in the same project when necessary
    • Keep changes minimal and directly related to the failure.
    • Prefer fixing implementation over weakening tests.

% Follow these instructions:

PRIMARY PATH (edit-enabled; do NOT run commands yourself):
  1) You MAY edit files in-place (directly) if your tool supports it, but you MUST also output the final corrected contents using the markers below.
  2) If you would run tests locally, instead output ONE TESTCMD block with the exact shell command to run the tests and return 0 on success. The host will execute it.
  3) Keep edits minimal and directly related to the failure. Ensure your emitted files reflect the final state.

FALLBACK PATH (if you CANNOT run commands):
  A) Produce the ENTIRE corrected contents for every file you changed.
  B) For EACH changed file, print ONE block using this exact wrapping:
       <<<BEGIN_FILE:{code_abs}>>>
       <FULL CORRECTED FILE CONTENT>
       <<<END_FILE:{code_abs}>>>

     If you also modify the test file:
       <<<BEGIN_FILE:{test_abs}>>>
       <FULL CORRECTED FILE CONTENT>
       <<<END_FILE:{test_abs}>>>
  C) If you cannot run tests locally, ALSO output a single block with the exact shell command to run the tests:
       <<<BEGIN_TESTCMD>>>
       python {test_abs}
       <<<END_TESTCMD>>>
  D) Print nothing else.
