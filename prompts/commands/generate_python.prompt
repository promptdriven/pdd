% You are an expert Python engineer. Your goal is to write `pdd/commands/generate.py`.

% Role & Scope
  This module contains the commands for the "Generate Suite": `generate`, `test`, and `example`. These commands use LLMs to create code, tests, or examples from prompts.

<include>context/python_preamble.prompt</include>

% Program Specification (README.md):
    <README.md>
    <include>./README.md</include>
    </README.md>

% Requirements
  1. **generate**:
     - Interface: Match the `generate` command specification in `README.md` (including parameterized `-e` options and templates).
     - Logic: Resolve template if provided. Parse env vars. Call `code_generator_main`.
     - Track cost using `@track_cost`.
     - Log operation using `@log_operation(operation="generate", clears_run_report=True, updates_fingerprint=True)`.
  2. **example**:
     - Interface: Match the `example` command specification in `README.md`.
     - Logic: Call `context_generator_main`.
     - Track cost using `@track_cost`.
     - Log operation using `@log_operation(operation="example", updates_fingerprint=True)`.
  3. **test**: Two modes determined by `--manual` flag:
     - **Agentic mode (default)**: Takes single GitHub issue URL argument, calls `run_agentic_test(issue_url, verbose, quiet, timeout_adder, use_github_state)`. Returns 5-tuple: (success, message, cost, model, changed_files). Display success status, cost, model used, and list of changed files using click.echo.
     - **Manual mode (`--manual` flag)**: Legacy behavior. Call `cmd_test_main`. Args: PROMPT_FILE, CODE_OR_EXAMPLE_FILE
     - Options: `--timeout-adder` (float, default 0.0, agentic mode only), `--no-github-state` (flag, disables GitHub state persistence, agentic mode only), `--verbose`/`--quiet` (agentic mode only)
     - Agentic mode: exactly 1 arg (issue URL)
     - Manual mode: exactly 2 args (PROMPT_FILE, CODE_OR_EXAMPLE_FILE)
     - Track cost using `@track_cost`.
     - Log operation using `@log_operation(operation="test", updates_run_report=True)`.

% Dependencies
  <include>context/command_logging.prompt</include>
  <code_generator_main_example>
  <include>context/code_generator_main_example.py</include>
  </code_generator_main_example>
  <context_generator_main_example>
  <include>context/context_generator_main_example.py</include>
  </context_generator_main_example>
  <cmd_test_main_example>
  <include>context/cmd_test_main_example.py</include>
  </cmd_test_main_example>
  <agentic_test_example>
  <include>context/agentic_test_example.py</include>
  </agentic_test_example>
  <track_cost_example>
  <include>context/track_cost_example.py</include>
  </track_cost_example>

% Instructions
  - Implement `GenerateCommand` custom class to fix help text for optional `PROMPT_FILE`.
  - Handle `click.UsageError` for conflicting options (template vs prompt file).
  - Ensure env var parsing logic matches the spec (KEY=VALUE or KEY from env).
  - Use `handle_error` for exception management.
  - Re-raise `click.Abort` exceptions to allow user cancellation (e.g., pressing 'no' on
    overwrite prompts) to propagate to the parent CLI for graceful handling.
  - For `test` command: validate argument count based on mode (1 arg for agentic, 2 args for manual) before calling the appropriate function.

% Deliverables
  - Code: `pdd/commands/generate.py`