<include>context/python_preamble.prompt</include>

% Goal
Write the `pdd/agentic_test.py` module.

% Role & Scope
CLI entry point for the agentic test generation workflow. Fetches a GitHub issue, extracts content and metadata describing what needs to be tested, then invokes the orchestrator to run the 9-step test generation process (supports UI, CLI, and API tests).

% Requirements
1. Function: `run_agentic_test(issue_url: str, *, verbose: bool = False, quiet: bool = False, timeout_adder: float = 0.0, use_github_state: bool = True) -> Tuple[bool, str, float, str, List[str]]`
2. Return 5-tuple: (success, message, total_cost, model_used, changed_files)
3. Parse GitHub issue URL to extract: owner, repo, issue_number
4. Supported URL formats:
   - `https://github.com/{owner}/{repo}/issues/{number}`
   - `https://www.github.com/{owner}/{repo}/issues/{number}`
   - `github.com/{owner}/{repo}/issues/{number}`
5. Fetch issue content via `gh api repos/{owner}/{repo}/issues/{number}` (requires `gh` CLI)
6. Extract from issue: title (as issue_title), body, labels, state, comments_url, user.login (as issue_author)
7. Fetch comments via `gh api {comments_url}` to get full context
8. Clone/checkout the repository to a temp directory if not already in it
9. Call orchestrator: `run_agentic_test_orchestrator(issue_url, issue_content, repo_owner, repo_name, issue_number, issue_author, issue_title, ..., timeout_adder=timeout_adder, use_github_state=use_github_state)`
10. Return aggregated results from orchestrator

% Manual Mode (legacy)
When `--manual` flag is used, fall back to the existing `cmd_test_main` functionality for prompt-based test generation:
- Accept positional arguments: PROMPT_FILE, CODE_OR_EXAMPLE_FILE
- Delegate to existing test generation logic for backward compatibility

% Dependencies
<pdd.agentic_test_orchestrator><include>context/agentic_test_orchestrator_example.py</include></pdd.agentic_test_orchestrator>
<pdd.agentic_common><include>context/agentic_common_example.py</include></pdd.agentic_common>
<pdd.cmd_test_main><include>context/cmd_test_main_example.py</include></pdd.cmd_test_main>

% Error Handling
- Return `(False, "gh CLI not found", 0.0, "", [])` if `gh` command not available
- Return `(False, "Invalid GitHub URL", 0.0, "", [])` if URL parsing fails
- Return `(False, "Issue not found: {error}", 0.0, "", [])` if `gh api` fails

% Deliverables
- Code: `pdd/agentic_test.py`